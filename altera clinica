

ALTER TABLE ponto.tb_estoque_cliente ADD COLUMN razao_social character varying(200);
ALTER TABLE ponto.tb_estoque_solicitacao_cliente ADD COLUMN faturado boolean NOT NULL DEFAULT false;
ALTER TABLE ponto.tb_estoque_solicitacao_itens ADD COLUMN valor numeric(10,2);
ALTER TABLE ponto.tb_estoque_cliente ADD COLUMN sala_id integer;

-- Dia 05/01/2017

DROP TABLE IF EXISTS ponto.tb_estoque_solicitacao_faturamento;

CREATE TABLE ponto.tb_estoque_solicitacao_faturamento
(
  estoque_solicitacao_faturamento_id serial NOT NULL,
  estoque_solicitacao_id integer,
  valor_total numeric(10,2),
  forma_pagamento integer,
  valor1 numeric(10,2) DEFAULT 0,
  forma_pagamento2 integer,
  valor2 numeric(10,2) DEFAULT 0,
  forma_pagamento3 integer,
  valor3 numeric(10,2) DEFAULT 0,
  forma_pagamento4 integer,
  valor4 numeric(10,2) DEFAULT 0,
  operador_faturamento integer,
  data_faturamento timestamp without time zone,
  desconto numeric(10,2) DEFAULT 0,
  faturado boolean NOT NULL DEFAULT false,
  parcelas1 integer DEFAULT 1,
  parcelas2 integer DEFAULT 1,
  parcelas3 integer DEFAULT 1,
  parcelas4 integer DEFAULT 1,
  observacao_faturamento character varying(8000),
  operador_obs_faturamento integer,
  data_obs_faturamento timestamp without time zone,
  data_cadastro timestamp without time zone,
  operador_cadastro integer,
  data_atualizacao timestamp without time zone,
  operador_atualizacao integer,
  CONSTRAINT tb_estoque_solicitacao_faturamento_pkey PRIMARY KEY (estoque_solicitacao_faturamento_id)
);
ALTER TABLE ponto.tb_estoque_solicitacao_faturamento ADD COLUMN ativo boolean NOT NULL DEFAULT true;

ALTER TABLE ponto.tb_estoque_cliente ADD COLUMN saida boolean NOT NULL DEFAULT false;


-- Dia 07/01/2017

ALTER TABLE ponto.tb_estoque_menu_produtos ADD COLUMN valor numeric(10,2);
ALTER TABLE ponto.tb_estoque_cliente ADD COLUMN tipo_logradouro_id integer;


-- Dia 13/01/2017

ALTER TABLE ponto.tb_estoque_produto ADD COLUMN ncm character varying(20);
ALTER TABLE ponto.tb_estoque_produto ADD COLUMN procedimento_id integer;
ALTER TABLE ponto.tb_estoque_produto RENAME COLUMN procedimento_id TO codigo;


-- Dia 14/01/2017

ALTER TABLE ponto.tb_estoque_cliente ADD COLUMN inscricao_estadual character varying(20);
ALTER TABLE ponto.tb_estoque_produto ALTER COLUMN codigo TYPE character varying;
ALTER TABLE ponto.tb_empresa ADD COLUMN inscricao_estadual character varying(20);


-- Dia 17/01/2017
CREATE TABLE ponto.tb_estoque_transportadora
(
  estoque_transportadora_id serial NOT NULL,
  descricao character varying(200),
  ativo boolean DEFAULT true,
  data_cadastro timestamp without time zone,
  operador_cadastro integer,
  data_atualizacao timestamp without time zone,
  operador_atualizacao integer,
  CONSTRAINT tb_transportadora_pkey PRIMARY KEY (estoque_transportadora_id)
);

CREATE TABLE ponto.tb_estoque_solicitacao_cliente_transportadora
(
  solicitacao_transportadora_id serial NOT NULL,
  transportadora_id integer,
  solicitacao_cliente_id integer,
  volume character varying(200),
  peso numeric(10,2),
  forma character varying(200),
  ativo boolean DEFAULT true,
  data_cadastro timestamp without time zone,
  operador_cadastro integer,
  data_atualizacao timestamp without time zone,
  operador_atualizacao integer,
  CONSTRAINT tb_solicitacao_transportadora_pkey PRIMARY KEY (solicitacao_transportadora_id)
);



-- Dia 21/01/2017

ALTER TABLE ponto.tb_estoque_entrada ADD COLUMN lote character varying(20);
ALTER TABLE ponto.tb_estoque_solicitacao_itens ADD COLUMN entrada_id integer;
ALTER TABLE ponto.tb_estoque_solicitacao_cliente ADD COLUMN transportadora boolean NOT NULL DEFAULT false;


-- Dia 23/01/2017
ALTER TABLE ponto.tb_estoque_cliente ADD COLUMN email character varying(60);


-- Dia 07/02/2017
ALTER TABLE ponto.tb_empresa ADD COLUMN email character varying(60);

-- Dia 08/02/2017
ALTER TABLE ponto.tb_estoque_solicitacao_itens ADD COLUMN cst character varying(10);
ALTER TABLE ponto.tb_estoque_solicitacao_cliente_transportadora ADD COLUMN valor_frete numeric(10,2);

-- Dia 10/02/2017

CREATE TABLE ponto.tb_entregador
(
  entregador_id serial NOT NULL,
  nome character varying(200) NOT NULL,
  cep character varying(9),
  logradouro character varying(200),
  numero character varying(20),
  complemento character varying(100),
  bairro character varying(100),
  municipio_id integer,
  sexo character varying(1),
  nascimento date,
  rg character varying(20),
  cns character varying(60),
  cpf character varying(11),
  celular character varying(15),
  telefone character varying(15),
  observacao character varying(300),
  data_cadastro timestamp without time zone,
  operador_cadastro integer,
  data_atualizacao timestamp without time zone,
  operador_atualizacao integer,
  ativo boolean DEFAULT true,
  CONSTRAINT tb_entregador_pkey PRIMARY KEY (entregador_id)
);

ALTER TABLE ponto.tb_estoque_solicitacao_cliente_transportadora ADD COLUMN entregador_id integer;

ALTER TABLE ponto.tb_estoque_solicitacao_itens ADD COLUMN icms numeric(10,2);
ALTER TABLE ponto.tb_estoque_solicitacao_itens ADD COLUMN ipi numeric(10,2);
ALTER TABLE ponto.tb_estoque_solicitacao_itens ADD COLUMN mva numeric(10,2);
ALTER TABLE ponto.tb_estoque_solicitacao_itens ADD COLUMN cfop_id integer;

CREATE TABLE ponto.tb_cfop
(
  cfop_id serial NOT NULL,
  codigo_cfop character varying(8),
  descricao_cfop character varying(500),
  indNFe character varying(8),
  indComunica character varying(8),
  indTransp character varying(8),
  indDevol character varying(8),
  ativo boolean DEFAULT true,
  CONSTRAINT tb_cfop_pkey PRIMARY KEY (cfop_id)
);


-- Dia 11/02/2017

ALTER TABLE ponto.tb_forma_pagamento ADD COLUMN cartao boolean;
ALTER TABLE ponto.tb_forma_pagamento ADD COLUMN boleto boolean;
ALTER TABLE ponto.tb_forma_pagamento ADD COLUMN parcela_minima numeric(10,2);
ALTER TABLE ponto.tb_forma_pagamento ADD COLUMN fixar boolean DEFAULT false;

ALTER TABLE ponto.tb_estoque_solicitacao_cliente ADD COLUMN contrato boolean DEFAULT false;
ALTER TABLE ponto.tb_estoque_solicitacao_cliente ADD COLUMN contrato_id integer;
ALTER TABLE ponto.tb_estoque_solicitacao_cliente ADD COLUMN boleto boolean DEFAULT false;


-- Dia 13/02/2017
CREATE TABLE ponto.tb_ncm
(
  ncm_id serial NOT NULL,
  codigo_ncm character varying(600),
  descricao_ncm character varying(5000),
  aliquota character varying(600),
  ativo boolean DEFAULT true,
  CONSTRAINT tb_ncm_pkey PRIMARY KEY (ncm_id)
);

CREATE TABLE ponto.tb_cest
(
  cest_id serial NOT NULL,
  codigo_cest character varying(600),
  codigo_ncm character varying(600),
  descricao_cest character varying(5000),
  ativo boolean DEFAULT true,
  CONSTRAINT tb_cest_pkey PRIMARY KEY (cest_id)
);

-- Dia 15/02/2017
ALTER TABLE ponto.tb_estoque_produto ADD COLUMN cest character varying(20);
ALTER TABLE ponto.tb_estoque_produto ADD COLUMN ipi numeric(10,2);
ALTER TABLE ponto.tb_estoque_solicitacao_itens ADD COLUMN icmsst boolean DEFAULT false;
ALTER TABLE ponto.tb_empresa ADD COLUMN impressao_tipo integer;

CREATE TABLE ponto.tb_cst
(
  cst_id serial NOT NULL,
  cst character varying(600),
  tipo character varying(600),
  situacao_tributaria character varying(5000),
  ativo boolean DEFAULT true,
  CONSTRAINT tb_cst_pkey PRIMARY KEY (cst_id)
);


-- Dia 16/02/2017
CREATE TABLE ponto.tb_estoque_contrato
(
  estoque_contrato_id serial NOT NULL,
  nome character varying(200),
  numero_contrato character varying(9),
  tipo_contrato_id integer,
  cliente_id integer,
  formapagamento_id integer,
  data_inicio date,
  data_fim date,
  data_assinatura date,
  valor_inicial numeric(10,2),
  calcao numeric(10,2),
  logradouro character varying(200),
  numero character varying(20),
  complemento character varying(100),
  bairro character varying(100),
  municipio_id integer,
  situacao character varying(50),
  observacao character varying(10000),
  clasulas character varying(30000),
  data_cadastro timestamp without time zone,
  operador_cadastro integer,
  data_atualizacao timestamp without time zone,
  operador_atualizacao integer,
  ativo boolean DEFAULT true,
  CONSTRAINT tb_estoque_contrato_pkey PRIMARY KEY (estoque_contrato_id)
);

CREATE TABLE ponto.tb_estoque_tipo_contrato
(
  estoque_tipo_contrato_id serial NOT NULL,
  descricao character varying(200),
  ativo boolean DEFAULT true,
  data_cadastro timestamp without time zone,
  operador_cadastro integer,
  data_atualizacao timestamp without time zone,
  operador_atualizacao integer,
  CONSTRAINT tb_estoque_tipo_contrato_pkey PRIMARY KEY (estoque_tipo_contrato_id)
);

--Dia 17/02/2017
ALTER TABLE ponto.tb_estoque_contrato ALTER COLUMN numero_contrato TYPE character varying(200);

-- Dia 20/02/2017

CREATE TABLE ponto.tb_descricao_forma_pagamento
(
  descricao_forma_pagamento_id serial NOT NULL,
  nome character varying(100) NOT NULL,
  ativo boolean NOT NULL DEFAULT true,
  operador_cadastro integer,
  data_cadastro timestamp without time zone,
  data_atualizacao timestamp without time zone,
  operador_atualizacao integer,
  conta_id integer,
  ajuste numeric(10,2),
  dia_receber integer,
  tempo_receber integer,
  credor_devedor integer,
  parcelas integer,
  taxa_juros numeric(10,2),
  fixar boolean DEFAULT false,
  cartao boolean,
  parcela_minima numeric(10,2),
  boleto boolean,
  CONSTRAINT tb_descricao_forma_pagamento_pkey PRIMARY KEY (descricao_forma_pagamento_id )
);

